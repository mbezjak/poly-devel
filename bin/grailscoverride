#!/bin/bash
#
# Continuous invocation of grailsoverride using inotify.

set -o errexit

declare -r plugin="$1"
declare -r plugindir="../$plugin"

grailsoverride "$plugin" > /dev/null

while inotifywait --quiet \
                  --recursive \
                  --event close_write,create,move,delete \
                  --exclude '(\.#|\.zip|target)' \
                  "$plugindir"
do
  grailsoverride "$plugin" > /dev/null
done

exit 0
