#!/bin/bash
#

set -o errexit

function usage { echo "Usage: $(basename $0) TAG_NAME"; }

declare -r tag="$1"
declare -r project=$(project-dir)
function grep-tag { grep "^$tag\$"; }

[[ -z "$tag" ]] && usage && die


if is-hg; then
    hg --quiet tags | grep-tag > /dev/null

elif is-git; then
    git tag --list | grep-tag > /dev/null

else
    fail "Unknown version control in: $project"
fi

exit 0
